<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android物联网三年开发总结 | wyb&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/blog/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="主流技术博客,简洁至上,专注全栈学习与总结。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/blog/assets/css/0.styles.7dd69afa.css" as="style"><link rel="preload" href="/blog/assets/js/app.7a0bcda5.js" as="script"><link rel="preload" href="/blog/assets/js/2.a5a0f980.js" as="script"><link rel="preload" href="/blog/assets/js/13.9e5f7372.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.2ffa04b0.js"><link rel="prefetch" href="/blog/assets/js/11.70f92a32.js"><link rel="prefetch" href="/blog/assets/js/12.340f549c.js"><link rel="prefetch" href="/blog/assets/js/14.b9340184.js"><link rel="prefetch" href="/blog/assets/js/15.6c1f35df.js"><link rel="prefetch" href="/blog/assets/js/16.e3c6e4ef.js"><link rel="prefetch" href="/blog/assets/js/17.0053c99b.js"><link rel="prefetch" href="/blog/assets/js/18.45a0f3ed.js"><link rel="prefetch" href="/blog/assets/js/19.fb9cc485.js"><link rel="prefetch" href="/blog/assets/js/20.3d5c7a50.js"><link rel="prefetch" href="/blog/assets/js/21.3d0ee275.js"><link rel="prefetch" href="/blog/assets/js/22.e8a9df9a.js"><link rel="prefetch" href="/blog/assets/js/23.82ed3e72.js"><link rel="prefetch" href="/blog/assets/js/24.9d7a7b68.js"><link rel="prefetch" href="/blog/assets/js/25.0bc9ab07.js"><link rel="prefetch" href="/blog/assets/js/26.d2b7a967.js"><link rel="prefetch" href="/blog/assets/js/27.2c02fa2c.js"><link rel="prefetch" href="/blog/assets/js/28.a1afa2d7.js"><link rel="prefetch" href="/blog/assets/js/29.10d9dc2f.js"><link rel="prefetch" href="/blog/assets/js/3.8ec5b007.js"><link rel="prefetch" href="/blog/assets/js/30.425d8100.js"><link rel="prefetch" href="/blog/assets/js/31.63e4f8fb.js"><link rel="prefetch" href="/blog/assets/js/32.77a66ca1.js"><link rel="prefetch" href="/blog/assets/js/33.d0e23080.js"><link rel="prefetch" href="/blog/assets/js/34.1e204563.js"><link rel="prefetch" href="/blog/assets/js/35.2833874a.js"><link rel="prefetch" href="/blog/assets/js/36.97de71b1.js"><link rel="prefetch" href="/blog/assets/js/37.9036f6e9.js"><link rel="prefetch" href="/blog/assets/js/38.6793c03d.js"><link rel="prefetch" href="/blog/assets/js/39.849e03fc.js"><link rel="prefetch" href="/blog/assets/js/4.6e55e017.js"><link rel="prefetch" href="/blog/assets/js/40.56980ac8.js"><link rel="prefetch" href="/blog/assets/js/41.7a196738.js"><link rel="prefetch" href="/blog/assets/js/42.10732ea3.js"><link rel="prefetch" href="/blog/assets/js/43.810ba5a4.js"><link rel="prefetch" href="/blog/assets/js/44.73bbd126.js"><link rel="prefetch" href="/blog/assets/js/45.63b7b5a1.js"><link rel="prefetch" href="/blog/assets/js/46.a65e64ce.js"><link rel="prefetch" href="/blog/assets/js/47.00dc050a.js"><link rel="prefetch" href="/blog/assets/js/48.b91a0ddd.js"><link rel="prefetch" href="/blog/assets/js/49.4a16d835.js"><link rel="prefetch" href="/blog/assets/js/5.4843dc8e.js"><link rel="prefetch" href="/blog/assets/js/50.132e204b.js"><link rel="prefetch" href="/blog/assets/js/51.1345b9a1.js"><link rel="prefetch" href="/blog/assets/js/52.742ee8db.js"><link rel="prefetch" href="/blog/assets/js/53.8d9c7dd6.js"><link rel="prefetch" href="/blog/assets/js/54.c4038d3f.js"><link rel="prefetch" href="/blog/assets/js/55.766e53e6.js"><link rel="prefetch" href="/blog/assets/js/56.ad60a3d1.js"><link rel="prefetch" href="/blog/assets/js/57.13758d00.js"><link rel="prefetch" href="/blog/assets/js/58.ee3f65e8.js"><link rel="prefetch" href="/blog/assets/js/59.602af4ee.js"><link rel="prefetch" href="/blog/assets/js/6.da76d55e.js"><link rel="prefetch" href="/blog/assets/js/60.15e31058.js"><link rel="prefetch" href="/blog/assets/js/61.7f219b23.js"><link rel="prefetch" href="/blog/assets/js/62.10d98d67.js"><link rel="prefetch" href="/blog/assets/js/63.8ef0d49d.js"><link rel="prefetch" href="/blog/assets/js/64.983ab7ac.js"><link rel="prefetch" href="/blog/assets/js/65.37330ddf.js"><link rel="prefetch" href="/blog/assets/js/66.2776a634.js"><link rel="prefetch" href="/blog/assets/js/67.8b5b3535.js"><link rel="prefetch" href="/blog/assets/js/68.cccc4d3a.js"><link rel="prefetch" href="/blog/assets/js/7.ba6e6c9a.js"><link rel="prefetch" href="/blog/assets/js/8.99b38245.js"><link rel="prefetch" href="/blog/assets/js/9.fc8f51e1.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.7dd69afa.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/EB-logo.png" alt="wyb's blog" class="logo"> <span class="site-name can-hide">wyb's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div> <a href="https://github.com/wyba/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/lufei.jpeg"> <div class="blogger-info"><h3>wyb</h3> <span>吾日三省吾身</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div> <a href="https://github.com/wyba/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/blog/pages/android_1/" class="sidebar-link">科大讯飞SDK使用总结</a></li><li><a href="/blog/pages/android_2/" class="sidebar-link">PDA串口UnsatisfiedLinkError解决</a></li><li><a href="/blog/pages/android_3/" class="sidebar-link">科大讯飞声纹识别WebApi鉴权认证失败解决</a></li><li><a href="/blog/pages/android_4/" class="sidebar-link">Android获取以太网mac、ip、网关、子网掩码</a></li><li><a href="/blog/pages/android_5/" class="sidebar-link">Android科大讯飞离线命令词+声纹识别终极奥义</a></li><li><a href="/blog/pages/android_6/" aria-current="page" class="active sidebar-link">Android物联网三年开发总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_1-androidstudio下载" class="sidebar-link">1.AndroidStudio下载</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_2-butterknife或者databinding" class="sidebar-link">2.butterknife或者dataBinding</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_3-必要权限申请" class="sidebar-link">3.必要权限申请</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_4-硬件踩坑" class="sidebar-link">4.硬件踩坑</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_5-收集app崩溃信息" class="sidebar-link">5.收集APP崩溃信息</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_6-好用的开源库依赖" class="sidebar-link">6.好用的开源库依赖</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_7-注意分包" class="sidebar-link">7.注意分包</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_8-屏幕适配" class="sidebar-link">8.屏幕适配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/android_6/#为什么选择-smallestwidth-限定符适配" class="sidebar-link">为什么选择 smallestWidth 限定符适配？</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/android_6/#使用步骤" class="sidebar-link">使用步骤</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/android_6/#怎么适配其他-module" class="sidebar-link">怎么适配其他 module?</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/android_6/#常见问题汇总" class="sidebar-link">常见问题汇总</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_9-性能优化" class="sidebar-link">9.性能优化</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_10-混淆" class="sidebar-link">10.混淆</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_6/#_11-测试" class="sidebar-link">11.测试</a></li></ul></li><li><a href="/blog/pages/android_7/" class="sidebar-link">BaseFragment封装</a></li><li><a href="/blog/pages/android_8/" class="sidebar-link">File封装</a></li><li><a href="/blog/pages/android_9/" class="sidebar-link">AndroidX项目迁移</a></li><li><a href="/blog/pages/android_10/" class="sidebar-link">视频通话测试踩坑</a></li><li><a href="/blog/pages/a9e14e/" class="sidebar-link">Android Jetpack简介</a></li><li><a href="/blog/pages/2ebf62/" class="sidebar-link">Android Jetpack+MVVM</a></li><li><a href="/blog/pages/874c9e/" class="sidebar-link">Androidx分包</a></li><li><a href="/blog/pages/066351/" class="sidebar-link">Android性能优化</a></li><li><a href="/blog/pages/bac66b/" class="sidebar-link">Android Activity</a></li><li><a href="/blog/pages/08ee91/" class="sidebar-link">Android BroadcastReceiver</a></li><li><a href="/blog/pages/6f10c5/" class="sidebar-link">Android Service</a></li><li><a href="/blog/pages/7284b2/" class="sidebar-link">Android ContentProvider</a></li><li><a href="/blog/pages/14545c/" class="sidebar-link">Android Fragment</a></li><li><a href="/blog/pages/004b87/" class="sidebar-link">Android序列化</a></li><li><a href="/blog/pages/7b3423/" class="sidebar-link">View事件机制</a></li><li><a href="/blog/pages/420b54/" class="sidebar-link">多进程及IPC</a></li><li><a href="/blog/pages/e86925/" class="sidebar-link">Bitmap加载优化</a></li><li><a href="/blog/pages/b906ee/" class="sidebar-link">ListView原理及复用机制</a></li><li><a href="/blog/pages/19c834/" class="sidebar-link">OkHttp原理</a></li><li><a href="/blog/pages/e5b1b5/" class="sidebar-link">EventBus原理</a></li><li><a href="/blog/pages/37f9d7/" class="sidebar-link">MeasureSpec原理</a></li><li><a href="/blog/pages/99060e/" class="sidebar-link">View工作流程</a></li><li><a href="/blog/pages/8aff38/" class="sidebar-link">动画简介</a></li><li><a href="/blog/pages/af8584/" class="sidebar-link">BLE开发</a></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/blog/Android/#Android" data-v-1baff76c>Android</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>wyb</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2021-12-22</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Android物联网三年开发总结<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><blockquote><p>说明：每天写一篇文章真难，哎都说万事开头难，近来也没啥事，不知道写什么，真的就是难啊，还得写日报，真是痛苦😩</p></blockquote> <h2 id="_1-androidstudio下载"><a href="#_1-androidstudio下载" class="header-anchor">#</a> 1.AndroidStudio下载</h2> <p>工欲善其事必先利其器</p> <p>下载链接：<a href="https://www.androiddevtools.cn/" target="_blank" rel="noopener noreferrer">https://www.androiddevtools.cn/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>下载最新的正式版，安装版或者解压缩版都可以，具体怎么安装就不介绍了，只要联网什么都好解决，其实就是看着提示解决，那都不是事！</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211222160738910.png" alt="image-20211222160738910"></p> <h2 id="_2-butterknife或者databinding"><a href="#_2-butterknife或者databinding" class="header-anchor">#</a> 2.butterknife或者dataBinding</h2> <p>之所以要这个就是懒得写findviewbyid之类的重复且没有营养的代码</p> <p>butterknife作者已经不建议使用了，作者还建议使用dataBinding，个人感觉都行吧，由于项目之前是butterknife，懒得换了</p> <p>先看看butterknife如何依赖使用</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>buildscript <span class="token punctuation">{</span>
    
    repositories <span class="token punctuation">{</span>
        <span class="token function">google</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        classpath <span class="token string">&quot;com.android.tools.build:gradle:4.1.2&quot;</span>
        classpath 'org<span class="token punctuation">.</span>greenrobot<span class="token operator">:</span>greendao<span class="token operator">-</span>gradle<span class="token operator">-</span>plugin<span class="token operator">:</span><span class="token number">3.3</span><span class="token number">.0</span>'
        classpath 'com<span class="token punctuation">.</span>jakewharton<span class="token operator">:</span>butterknife<span class="token operator">-</span>gradle<span class="token operator">-</span>plugin<span class="token operator">:</span><span class="token number">10.0</span><span class="token number">.0</span>'
        <span class="token comment">// NOTE: Do not place your application dependencies here; they belong</span>
        <span class="token comment">// in the individual module build.gradle files</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*ButterKnife引用*/</span>
implementation <span class="token string">&quot;com.jakewharton:butterknife:10.0.0&quot;</span>
annotationProcessor <span class="token string">&quot;com.jakewharton:butterknife-compiler:10.0.0&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>dataBinding依赖使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>buildFeatures{
    dataBinding = true
    // for view binding :
    // viewBinding = true
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_3-必要权限申请"><a href="#_3-必要权限申请" class="header-anchor">#</a> 3.必要权限申请</h2> <p>Android6.0以后就需要申请权限了，不是想要什么就给什么了，相机、录音、读取sd卡都需要申请的哦！</p> <p>权限申请依赖库</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/*权限申请*/
implementation 'pub.devrel:easypermissions:2.0.0'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>原理是开启app时，在首页申请</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">denseshelf<span class="token punctuation">.</span>app</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span></span><span class="token class-name">Manifest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Intent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Uri</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Build</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>provider<span class="token punctuation">.</span></span><span class="token class-name">Settings</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">NonNull</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>fragment<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Fragment</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>afollestad<span class="token punctuation">.</span>materialdialogs<span class="token punctuation">.</span></span><span class="token class-name">DialogAction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>afollestad<span class="token punctuation">.</span>materialdialogs<span class="token punctuation">.</span></span><span class="token class-name">MaterialDialog</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>hs<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ActivityManager</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>eventbus<span class="token punctuation">.</span></span><span class="token class-name">EventBus</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">denseshelf<span class="token punctuation">.</span>app<span class="token punctuation">.</span>camera<span class="token punctuation">.</span></span><span class="token class-name">CameraEvent</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">denseshelf<span class="token punctuation">.</span>app<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Constants</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">pub<span class="token punctuation">.</span>devrel<span class="token punctuation">.</span>easypermissions<span class="token punctuation">.</span></span><span class="token class-name">EasyPermissions</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SplashActivity</span> <span class="token keyword">extends</span> <span class="token class-name">BaseActivity</span> <span class="token keyword">implements</span> <span class="token class-name">EasyPermissions<span class="token punctuation">.</span>PermissionCallbacks</span> <span class="token punctuation">{</span>


    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> perms <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span>READ_EXTERNAL_STORAGE<span class="token punctuation">,</span>
            <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span>WRITE_EXTERNAL_STORAGE<span class="token punctuation">,</span>
            <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span>CAMERA<span class="token punctuation">,</span>
            <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span>READ_PHONE_STATE<span class="token punctuation">,</span>
            <span class="token class-name">Manifest</span><span class="token punctuation">.</span>permission<span class="token punctuation">.</span>RECORD_AUDIO
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;SplashActivity&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;isTaskRoot==&quot;</span> <span class="token operator">+</span> <span class="token function">isTaskRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isTaskRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Constants</span><span class="token punctuation">.</span>hasSplash <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Build</span><span class="token punctuation">.</span>VERSION<span class="token punctuation">.</span>SDK_INT <span class="token operator">&gt;=</span> <span class="token class-name">Build<span class="token punctuation">.</span>VERSION_CODES<span class="token punctuation">.</span>M</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Settings</span><span class="token punctuation">.</span><span class="token function">canDrawOverlays</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">Settings</span><span class="token punctuation">.</span>ACTION_MANAGE_OVERLAY_PERMISSION<span class="token punctuation">,</span> <span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;package:&quot;</span> <span class="token operator">+</span> <span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">startActivityForResult</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">EasyPermissions</span><span class="token punctuation">.</span><span class="token function">hasPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> perms<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">EasyPermissions</span><span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;该应用需要以下权限，请允许！&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>isTest<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">startActivityThenFinish</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">LoginActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">startActivityThenFinish</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">WelcomeActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>isTest<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">startActivityThenFinish</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">LoginActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">startActivityThenFinish</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">WelcomeActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token class-name">Fragment</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onActivityResult</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestCode<span class="token punctuation">,</span> <span class="token keyword">int</span> resultCode<span class="token punctuation">,</span> <span class="token class-name">Intent</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Build</span><span class="token punctuation">.</span>VERSION<span class="token punctuation">.</span>SDK_INT <span class="token operator">&gt;=</span> <span class="token class-name">Build<span class="token punctuation">.</span>VERSION_CODES<span class="token punctuation">.</span>M</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Settings</span><span class="token punctuation">.</span><span class="token function">canDrawOverlays</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// SYSTEM_ALERT_WINDOW permission not granted...</span>
                    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;SplashActivity&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;onActivityResult 未授权&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token keyword">new</span> <span class="token class-name">MaterialDialog<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">&quot;警告&quot;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token string">&quot;请授予权限！&quot;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">positiveText</span><span class="token punctuation">(</span><span class="token string">&quot;确定&quot;</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">onPositive</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MaterialDialog<span class="token punctuation">.</span>SingleButtonCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                <span class="token annotation punctuation">@Override</span>
                                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> <span class="token class-name">MaterialDialog</span> dialog<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token class-name">DialogAction</span> which<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    dialog<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">Settings</span><span class="token punctuation">.</span>ACTION_MANAGE_OVERLAY_PERMISSION<span class="token punctuation">,</span> <span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;package:&quot;</span> <span class="token operator">+</span> <span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token function">startActivityForResult</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">autoDismiss</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">cancelable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;SplashActivity&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;onActivityResult 已授权&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">EasyPermissions</span><span class="token punctuation">.</span><span class="token function">hasPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> perms<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">EasyPermissions</span><span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">&quot;该应用需要以下权限，请允许！&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>isTest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">startActivityThenFinish</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">LoginActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                            <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">startActivityThenFinish</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">WelcomeActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>

                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onRequestPermissionsResult</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestCode<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> permissions<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grantResults<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onRequestPermissionsResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> permissions<span class="token punctuation">,</span> grantResults<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将请求结果传递EasyPermission库处理</span>
        <span class="token class-name">EasyPermissions</span><span class="token punctuation">.</span><span class="token function">onRequestPermissionsResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> permissions<span class="token punctuation">,</span> grantResults<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPermissionsGranted</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestCode<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> perms<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>perms<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token class-name">CameraEvent</span> cameraEvent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CameraEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cameraEvent<span class="token punctuation">.</span><span class="token function">setOp</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">EventBus</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>cameraEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>isTest<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">startActivityThenFinish</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">LoginActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">ActivityManager</span><span class="token punctuation">.</span><span class="token function">startActivityThenFinish</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">WelcomeActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPermissionsDenied</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestCode<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> perms<span class="token punctuation">)</span> <span class="token punctuation">{</span>


    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br></div></div><p>由于隐藏拍照的缘故，我们需要额外申请应用可以悬浮于其他应用，也就是全局窗口的权限</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Settings</span><span class="token punctuation">.</span><span class="token function">canDrawOverlays</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">Settings</span><span class="token punctuation">.</span>ACTION_MANAGE_OVERLAY_PERMISSION<span class="token punctuation">,</span> <span class="token class-name">Uri</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;package:&quot;</span> <span class="token operator">+</span> <span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">startActivityForResult</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>先申请这个权限，再去申请相机、录音等其他权限，若是不给权限就不给进入登录界面，不讲道理，就要给，不给权限不给玩，毕竟整个屏幕就运行这个软件，还得怎么着！</p> <h2 id="_4-硬件踩坑"><a href="#_4-硬件踩坑" class="header-anchor">#</a> 4.硬件踩坑</h2> <p>做物联网的，智能柜，就是在门上装个主控屏，也就是安卓工控屏，做个app提供别人操作，就可以称之为智能柜了，之所以选着安卓作为主控，也是因为安卓比较成熟稳定，用户操作也是方便，就像玩手机一样，Android确实是个不错的选择！</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211222165412554.png" alt="image-20211222165412554"></p> <p>我们做的应用应该是集成了一系列的硬件，可以说是一个的业务解决方案，根据不同的业务选择不同的硬件，三年来的感悟，我们公司最大的优势就是业务，硬件有自己做的也有采购的，自己做的就是下位机控制锁灯之类的，其他都是便宜货买的，然后整合所有的硬件，给用户展现出来，确切的说，我们的系统是一个各种硬件集成系统，硬件本身就只有功能可言，要有具体的业务才能去更好的使用，没有业务，做硬件本身就没什么意义，有了业务就说明别人在一定程度上有这个需求，然后我们做分析，得到各种业务，然后再采购各种硬件，就是这样吧。</p> <p>我们的硬件：</p> <p>1.摄像头（u口的，用来人脸识别、拍照、扫条码、扫二维码）</p> <p>2.指纹仪（u口的，指昂生产的，用来指纹登录的）</p> <p>3.读写器（串口的，融瑞或者国芯的读写器，用来做登录、扫档案标签快速查询的）</p> <p>4.条码扫码模块（有U口的有串口的，U口即插即用，有光标的地方就能输入，串口的话要启个线程去读）</p> <p>5.下位机（arm32，串口通信，要根据协议发送和解析）</p> <p>6.一体机外围设备，触摸屏、麦克风、喇叭、纽扣电池、网口（1个以太网，和上位机通信）、U口（3个）、串口（4个）、wifi（用来激活人脸的，通常他们安装工是开手机热点激活的）、4G（有些单位是需要云平台的，要连外网，所以4G是最佳的选择吧，因为以太网和wifi都是连局域网的），2G的运行内存，32G的存储空间，Android系统最好是6.0以上，芯片最好是3288的，不过我们都是用全志的，8核，A83，最好留个SIM卡、TF卡、OTG的口，以便以后维护，没想到还有个蜂鸣器可以玩耍一下。</p> <p>想做好一款应用还是挺难的，要测一体机外围设备，遍历测试，遇到的坑，记录一下：</p> <p>坑1：以太网网络不通，说是因为mac随机生成，组播地址冲突了，需要推送重新生成，贴下图片</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211223093901863.png" alt="image-20211223093901863"></p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211223093919852.png" alt="image-20211223093919852"></p> <p>坑2：wifi上不了网，还是固件问题</p> <p>坑3：4G也上不了网，说是和以太网冲突了，还是固件问题</p> <p>坑4：摄像头人脸识别不了，固件只适配了1080P的摄像头，还要求格式是yuv的，也是蛋疼</p> <p>坑5：串口不通，有些串口是485的，当然不行了，最好就是232的，232双工通信，对主控而言一般都是232，板子之间的通信485会好一点，串口不通就用usb转串口，和电脑发送一下消息，用sscom这个串口调试工具，没问题了，就和下位机调试，或者也可以直接找硬件开发看一下，大多都是串口线的问题，有交叉的有直连，不是交叉就是直连，一体机本身的串口问题一般很少，但是也不排除有485串口的可能。</p> <p>坑6：屏幕触摸不灵敏，要使用电容屏，TP还要竖屏并且有自己的固件，每个角落最好点一下测试一遍</p> <p>坑7：麦克风时灵时不灵，主要还是焊线的问题，没有做好屏蔽</p> <p>坑8：没有纽扣电池，时间就会掉，时间一掉，激活人脸和声纹就会失败，因为时差太大了</p> <p>坑9：视频通话跑起来真卡，3288上没问题，3288自带vp8硬件编解码，视频通话帧率可以达到20帧以上吧</p> <p>坑10：语音识别确实没有手机上那么快又准，虽然都是用科大讯飞的算法，主要有离线听写、离线命令词、语音唤醒、声纹识别</p> <p>坑11：开机之后有插入sim卡弹窗，也是服了，做得和手机一样，有必要吗，改一下固件就OK了</p> <p>坑12：喇叭不够大声，主要还是输出功率小了，喇叭主要要是TTS使用，用科大讯飞的，文本转语音，安装好apk之后，在设置里面的语音和输入法可以看到文字转语音输出，点进去选择科大讯飞引擎就可以了</p> <p>感觉以上硬件坑好多啊，具体的业务很多坑，不过软件上的问题好解决，难解决的是硬件调用，硬件资源有限，不能同时调用，调用也有失败的可能，所以做好防范，避免app崩溃一件头疼的大事。</p> <h2 id="_5-收集app崩溃信息"><a href="#_5-收集app崩溃信息" class="header-anchor">#</a> 5.收集APP崩溃信息</h2> <p>可以简单的收集一下，深入的话可以用爱奇艺的开源库收集</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>hs<span class="token punctuation">.</span>toolkit<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span><span class="token class-name">Context</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>pm<span class="token punctuation">.</span></span><span class="token class-name">PackageInfo</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>pm<span class="token punctuation">.</span></span><span class="token class-name">PackageManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>pm<span class="token punctuation">.</span></span><span class="token class-name">PackageManager</span><span class="token punctuation">.</span><span class="token class-name">NameNotFoundException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Build</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Environment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">StringWriter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Writer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token class-name">UncaughtExceptionHandler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">DateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CrashHandler</span> <span class="token keyword">implements</span> <span class="token class-name">UncaughtExceptionHandler</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> TAG <span class="token operator">=</span> <span class="token string">&quot;CrashHandler&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 系统默认的UncaughtException处理类</span>
    <span class="token keyword">private</span> <span class="token class-name">UncaughtExceptionHandler</span> mDefaultHandler<span class="token punctuation">;</span>
    <span class="token comment">// CrashHandler实例</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">CrashHandler</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CrashHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 程序的Context对象</span>
    <span class="token keyword">private</span> <span class="token class-name">Context</span> mContext<span class="token punctuation">;</span>
    <span class="token comment">// 用来存储设备信息和异常信息</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> infos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 用于格式化日期,作为日志文件名的一部分</span>
    <span class="token keyword">private</span> <span class="token class-name">DateFormat</span> formatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd_HH-mm-ss&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token function">getExternalStorageDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/crash/&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 保证只有一个CrashHandler实例
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">CrashHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取CrashHandler实例 ,单例模式
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CrashHandler</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 初始化
     *
     * @param context
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mContext <span class="token operator">=</span> context<span class="token punctuation">;</span>
        <span class="token comment">// 获取系统默认的UncaughtException处理器</span>
        mDefaultHandler <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">getDefaultUncaughtExceptionHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置该CrashHandler为程序的默认处理器</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">setDefaultUncaughtExceptionHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 当UncaughtException发生时会转入该函数来处理
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">uncaughtException</span><span class="token punctuation">(</span><span class="token class-name">Thread</span> thread<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 收集设备参数信息</span>
        <span class="token function">collectDeviceInfo</span><span class="token punctuation">(</span>mContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 保存日志文件</span>
        <span class="token function">saveCrashInfo2File</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>

        ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//如果系统提供了默认异常处理就交给系统进行处理，否则自己进行处理。</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mDefaultHandler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mDefaultHandler<span class="token punctuation">.</span><span class="token function">uncaughtException</span><span class="token punctuation">(</span>thread<span class="token punctuation">,</span> ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 退出程序</span>
            <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Process</span><span class="token punctuation">.</span><span class="token function">killProcess</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Process</span><span class="token punctuation">.</span><span class="token function">myPid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * 收集设备参数信息
     *
     * @param ctx
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">collectDeviceInfo</span><span class="token punctuation">(</span><span class="token class-name">Context</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">PackageManager</span> pm <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">PackageInfo</span> pi <span class="token operator">=</span> pm<span class="token punctuation">.</span><span class="token function">getPackageInfo</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token class-name">PackageManager</span><span class="token punctuation">.</span>GET_ACTIVITIES<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>pi <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> versionName <span class="token operator">=</span> pi<span class="token punctuation">.</span>versionName <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;null&quot;</span>
                        <span class="token operator">:</span> pi<span class="token punctuation">.</span>versionName<span class="token punctuation">;</span>
                <span class="token class-name">String</span> versionCode <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>pi<span class="token punctuation">.</span>versionCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
                infos<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;versionName&quot;</span><span class="token punctuation">,</span> versionName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                infos<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;versionCode&quot;</span><span class="token punctuation">,</span> versionCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NameNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;an error occured when collect package info&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> <span class="token class-name">Build</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                field<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                infos<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;an error occured when collect crash info&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 保存错误信息到文件中
     *
     * @param ex
     * @return 返回文件名称, 便于将文件传送到服务器
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">saveCrashInfo2File</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> infos<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> key <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Writer</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>writer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span>printWriter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Throwable</span> cause <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>cause <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cause<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span>printWriter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cause <span class="token operator">=</span> cause<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        printWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> writer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> time <span class="token operator">=</span> formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token string">&quot;crash-&quot;</span> <span class="token operator">+</span> time <span class="token operator">+</span> <span class="token string">&quot;.txt&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span><span class="token function">getExternalStorageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Environment</span><span class="token punctuation">.</span>MEDIA_MOUNTED<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>path <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                fos<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;an error occured while writing file...&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br></div></div><h2 id="_6-好用的开源库依赖"><a href="#_6-好用的开源库依赖" class="header-anchor">#</a> 6.好用的开源库依赖</h2> <p>根据业务来吧</p> <p>有开源控件、开源框架</p> <p>有greendao、eventbus、okhttp等等</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/*switch-button*/</span>
implementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>zcweng<span class="token operator">:</span><span class="token keyword">switch</span><span class="token operator">-</span>button<span class="token operator">:</span><span class="token number">0.0</span><span class="token number">.3</span><span class="token annotation punctuation">@aar</span>'
<span class="token comment">/*circleImageView*/</span>
implementation 'de<span class="token punctuation">.</span>hdodenhof<span class="token operator">:</span>circleimageview<span class="token operator">:</span><span class="token number">2.2</span><span class="token number">.0</span>'
<span class="token comment">/*event bus*/</span>
implementation 'org<span class="token punctuation">.</span>greenrobot<span class="token operator">:</span>eventbus<span class="token operator">:</span><span class="token number">3.1</span><span class="token number">.1</span>'
<span class="token comment">/*方法数超过65535 分包处理*/</span>
implementation 'androidx<span class="token punctuation">.</span>multidex<span class="token operator">:</span>multidex<span class="token operator">:</span><span class="token number">2.0</span><span class="token number">.1</span>'
<span class="token comment">/*数字进度条*/</span>
implementation 'com<span class="token punctuation">.</span>daimajia<span class="token punctuation">.</span>numberprogressbar<span class="token operator">:</span>library<span class="token operator">:</span><span class="token number">1.4</span><span class="token annotation punctuation">@aar</span>'
implementation '<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span></span>PhilJay</span><span class="token operator">:</span><span class="token class-name">MPAndroidChart</span><span class="token operator">:</span>v3<span class="token punctuation">.</span><span class="token number">1.0</span><span class="token operator">-</span>alpha'
<span class="token comment">/*基类Adapter*/</span>
implementation '<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>wyba<span class="token punctuation">.</span></span>MyBaseAdapter</span><span class="token operator">:</span>library<span class="token operator">:</span>V1<span class="token punctuation">.</span><span class="token number">5.0</span>'
implementation 'pl<span class="token punctuation">.</span>droidsonroids<span class="token punctuation">.</span>gif<span class="token operator">:</span>android<span class="token operator">-</span>gif<span class="token operator">-</span>drawable<span class="token operator">:</span><span class="token number">1.2</span><span class="token number">.16</span>'
implementation 'q<span class="token punctuation">.</span>rorbin<span class="token operator">:</span>badgeview<span class="token operator">:</span><span class="token number">1.1</span><span class="token number">.3</span>'
implementation 'com<span class="token punctuation">.</span>tencent<span class="token operator">:</span>mmkv<span class="token operator">-</span><span class="token keyword">static</span><span class="token operator">:</span><span class="token number">1.0</span><span class="token number">.23</span>'

implementation 'com<span class="token punctuation">.</span>yanzhenjie<span class="token punctuation">.</span>andserver<span class="token operator">:</span>api<span class="token operator">:</span><span class="token number">2.0</span><span class="token number">.4</span>'
annotationProcessor 'com<span class="token punctuation">.</span>yanzhenjie<span class="token punctuation">.</span>andserver<span class="token operator">:</span>processor<span class="token operator">:</span><span class="token number">2.0</span><span class="token number">.4</span>'
implementation 'org<span class="token punctuation">.</span>java<span class="token operator">-</span>websocket<span class="token operator">:</span><span class="token class-name">Java</span><span class="token operator">-</span><span class="token class-name">WebSocket</span><span class="token operator">:</span><span class="token number">1.4</span><span class="token number">.0</span>'
implementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>warkiz<span class="token punctuation">.</span>widget<span class="token operator">:</span>indicatorseekbar<span class="token operator">:</span><span class="token number">2.1</span><span class="token number">.2</span>'
implementation 'com<span class="token punctuation">.</span>alibaba<span class="token operator">:</span>fastjson<span class="token operator">:</span><span class="token number">1.2</span><span class="token number">.18</span>'
implementation 'com<span class="token punctuation">.</span>lzy<span class="token punctuation">.</span>net<span class="token operator">:</span>okgo<span class="token operator">:</span><span class="token number">3.0</span><span class="token number">.4</span>'
implementation 'com<span class="token punctuation">.</span>squareup<span class="token punctuation">.</span>okhttp3<span class="token operator">:</span>okhttp<span class="token operator">:</span><span class="token number">3.10</span><span class="token number">.0</span>'
implementation 'com<span class="token punctuation">.</span>squareup<span class="token punctuation">.</span>okio<span class="token operator">:</span>okio<span class="token operator">:</span><span class="token number">1.14</span><span class="token number">.0</span>'
implementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>wyba<span class="token operator">:</span><span class="token class-name">RxHttp</span><span class="token operator">:</span>V1<span class="token punctuation">.</span><span class="token number">0.3</span>'
<span class="token comment">//MD风格对话框</span>
implementation 'com<span class="token punctuation">.</span>afollestad<span class="token punctuation">.</span>material<span class="token operator">-</span>dialogs<span class="token operator">:</span>core<span class="token operator">:</span><span class="token number">0.9</span><span class="token number">.6</span><span class="token number">.0</span>'

implementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token operator">:</span>glide<span class="token operator">:</span><span class="token number">4.9</span><span class="token number">.0</span>'
annotationProcessor 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token number">4.9</span><span class="token number">.0</span>'

<span class="token comment">// 仅在debug包启用BlockCanary进行卡顿监控和提示的话，可以这么用</span>
debugImplementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>markzhai<span class="token operator">:</span>blockcanary<span class="token operator">-</span>android<span class="token operator">:</span><span class="token number">1.5</span><span class="token number">.0</span>'
releaseImplementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>markzhai<span class="token operator">:</span>blockcanary<span class="token operator">-</span>no<span class="token operator">-</span>op<span class="token operator">:</span><span class="token number">1.5</span><span class="token number">.0</span>'
implementation 'com<span class="token punctuation">.</span>scwang<span class="token punctuation">.</span>smart<span class="token operator">:</span>refresh<span class="token operator">-</span>layout<span class="token operator">-</span>kernel<span class="token operator">:</span><span class="token number">2.0</span><span class="token number">.1</span>'
<span class="token comment">//核心必须依赖</span>
implementation 'com<span class="token punctuation">.</span>scwang<span class="token punctuation">.</span>smart<span class="token operator">:</span>refresh<span class="token operator">-</span>header<span class="token operator">-</span>classics<span class="token operator">:</span><span class="token number">2.0</span><span class="token number">.1</span>'
<span class="token comment">//经典刷新头</span>
implementation 'com<span class="token punctuation">.</span>scwang<span class="token punctuation">.</span>smart<span class="token operator">:</span>refresh<span class="token operator">-</span>footer<span class="token operator">-</span>classics<span class="token operator">:</span><span class="token number">2.0</span><span class="token number">.1</span>'
<span class="token comment">//经典加载</span>
<span class="token comment">/*PhotoView使用(图片可缩放)*/</span>
implementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>chrisbanes<span class="token operator">:</span><span class="token class-name">PhotoView</span><span class="token operator">:</span><span class="token number">1.2</span><span class="token number">.6</span>'
implementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>mjdev<span class="token operator">:</span>libaums<span class="token operator">:</span><span class="token number">0.5</span><span class="token number">.5</span>'

implementation '<span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>github<span class="token punctuation">.</span></span>CymChad</span><span class="token operator">:</span><span class="token class-name">BaseRecyclerViewAdapterHelper</span><span class="token operator">:</span><span class="token number">3.0</span><span class="token number">.4</span>'

implementation 'io<span class="token punctuation">.</span>reactivex<span class="token punctuation">.</span>rxjava2<span class="token operator">:</span>rxjava<span class="token operator">:</span><span class="token number">2.2</span><span class="token number">.9</span>'
implementation 'io<span class="token punctuation">.</span>reactivex<span class="token punctuation">.</span>rxjava2<span class="token operator">:</span>rxandroid<span class="token operator">:</span><span class="token number">2.1</span><span class="token number">.0</span>'

implementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>adrielcafe<span class="token operator">:</span>ffmpeg<span class="token operator">-</span>android<span class="token operator">-</span>java<span class="token operator">:</span><span class="token number">2</span>a627f6ecd<span class="token annotation punctuation">@aar</span>'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p>switch-button：开关按钮</p> <p>circleimageview：圆形图片</p> <p>eventbus：事件总线，用来刷新UI的</p> <p>numberprogressbar：数字进度条</p> <p>MPAndroidChart：图表，做各种统计用，有折线图、柱状图、饼图</p> <p>MyBaseAdapter：自己封装的库，提供listview使用</p> <p>android-gif-drawable：加载gif的，档案3d指引里面的红点闪烁其实就是一张gif的图片</p> <p>badgeview：效果就是在一个View上有一个小红圈，表示未读数，类似微信里的未读消息一样</p> <p>mmkv-static：用来做本地配置存储，KV的形式</p> <p>andserver：用安卓做服务器使用，用来直接控制密集架的，不经过电脑，直连安卓也可以控制架体</p> <p>Java-WebSocket：用来做推送用的，推送到java服务器的，需要做断开重连机制，还要做心跳机制</p> <p>indicatorseekbar：滑块控件，就像手机调节音量一样</p> <p>fastjson：解析json</p> <p>okhttp+okio+rxjava+rxandroid+okgo+RxHttp：网络请求接口库</p> <p>material-dialogs：扁平化风格的dialog</p> <p>glide：图片加载</p> <p>blockcanary-android：卡顿检测</p> <p>refresh-layout-kernel：上拉加载，下拉刷新库</p> <p>PhotoView：图片缩放</p> <p>libaums：这个库可以做usb存储卡检测，读写U盘，做导出U盘使用</p> <p>BaseRecyclerViewAdapterHelper：基类Adapter，提供给RecyclerView使用</p> <p>ffmpeg-android-java：最近做声纹识别使用，wav转mp3</p> <h2 id="_7-注意分包"><a href="#_7-注意分包" class="header-anchor">#</a> 7.注意分包</h2> <p>项目做大了，方法就会超限，分包还是必须的啊，不多说直接上</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/*方法数超过65535 分包处理*/
implementation 'androidx.multidex:multidex:2.0.1'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>defaultConfig <span class="token punctuation">{</span>
    applicationId <span class="token string">&quot;denseshelf.app&quot;</span>
    minSdkVersion <span class="token number">17</span>
    targetSdkVersion <span class="token number">30</span>
    versionCode <span class="token number">116</span>
    versionName <span class="token string">&quot;1.0.115&quot;</span>
    testInstrumentationRunner '<span class="token class-name"><span class="token namespace">androidx<span class="token punctuation">.</span>test<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span>AndroidJUnitRunner</span>'

    packagingOptions <span class="token punctuation">{</span>

        exclude 'META<span class="token operator">-</span>INF<span class="token operator">/</span>proguard<span class="token operator">/</span>androidx<span class="token operator">-</span>annotations<span class="token punctuation">.</span>pro'
    <span class="token punctuation">}</span>
    useLibrary 'org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>http<span class="token punctuation">.</span>legacy'
    <span class="token comment">/*允许分包*/</span>
    multiDexEnabled <span class="token boolean">true</span>

    ndk <span class="token punctuation">{</span>
        abiFilters <span class="token string">&quot;arm64-v8a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;armeabi-v7a&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

dexOptions <span class="token punctuation">{</span>
        javaMaxHeapSize <span class="token string">&quot;4g&quot;</span>
        jumboMode <span class="token operator">=</span> <span class="token boolean">true</span>
        preDexLibraries <span class="token operator">=</span> <span class="token boolean">false</span>
        additionalParameters <span class="token operator">=</span> <span class="token punctuation">[</span>
                '<span class="token operator">--</span>multi<span class="token operator">-</span>dex'<span class="token punctuation">,</span><span class="token comment">//多分包</span>
                '<span class="token operator">--</span>set<span class="token operator">-</span>max<span class="token operator">-</span>idx<span class="token operator">-</span>number<span class="token operator">=</span><span class="token number">60000</span>'<span class="token comment">//每个包内方法数上限</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">attachBaseContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> base<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">attachBaseContext</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MultiDex</span><span class="token punctuation">.</span><span class="token function">install</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_8-屏幕适配"><a href="#_8-屏幕适配" class="header-anchor">#</a> 8.屏幕适配</h2> <p>参考文章：<a href="https://blog.csdn.net/qq_41138470/article/details/88287011" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_41138470/article/details/88287011<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>这人写得还可以吧，还是需要记录一下的。</p> <p>smallestWidth 限定符适配原理与屏幕分辨率限定符适配原理一样，系统都是根据限定符去寻找对应的 dimens.xml  文件。例如程序运行在最小宽度为 360dp 的设备上，系统会自动找到对应的 values-sw360dp 文件夹下的 dimens.xml  文件。区别就在于屏幕分辨率限定符适配是拿 px 值等比例缩放，而 smallestWidth 限定符适配是拿 dp  值来等比缩放而已。需要注意的是“最小宽度”是不区分方向的，即无论是宽度还是高度，哪一边小就认为哪一边是“最小宽度”。如下分别为最小宽度为  360dp 与最小宽度为 640dp 所对应的 dimens.xml 文件：</p> <p>获取设备最小宽度代码为</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token class-name">DisplayMetrics</span> dm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DisplayMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">getWindowManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDefaultDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMetrics</span><span class="token punctuation">(</span>dm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> heightPixels <span class="token operator">=</span> dm<span class="token punctuation">.</span>heightPixels<span class="token punctuation">;</span>
    <span class="token keyword">int</span> widthPixels <span class="token operator">=</span> dm<span class="token punctuation">.</span>widthPixels<span class="token punctuation">;</span>
    <span class="token keyword">float</span> density <span class="token operator">=</span> dm<span class="token punctuation">.</span>density<span class="token punctuation">;</span>
    <span class="token keyword">float</span> heightDP <span class="token operator">=</span> heightPixels <span class="token operator">/</span> density<span class="token punctuation">;</span>
    <span class="token keyword">float</span> widthDP <span class="token operator">=</span> widthPixels <span class="token operator">/</span> density<span class="token punctuation">;</span>
    <span class="token keyword">float</span> smallestWidthDP<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>widthDP <span class="token operator">&lt;</span> heightDP<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        smallestWidthDP <span class="token operator">=</span> widthDP<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        smallestWidthDP <span class="token operator">=</span> heightDP<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="为什么选择-smallestwidth-限定符适配"><a href="#为什么选择-smallestwidth-限定符适配" class="header-anchor">#</a> <strong>为什么选择 smallestWidth 限定符适配？</strong></h3> <p>既然原理都一样，都需要多套 dimens.xml 文件，那为什么要选择 smallestWidth 限定符适配呢？</p> <ol><li>屏幕分辨率限定符适配是根据屏幕分辨率的，Android 设备分辨率一大堆，而且还要考虑虚拟键盘，这样就需要大量的  dimens.xml 文件。因为无论手机屏幕的像素多少，密度多少，90% 的手机的最小宽度都为 360dp，所以采用 smallestWidth 限定符适配只需要少量 dimens.xml 文件即可。</li> <li>屏幕分辨率限定符适配采用的是 px 单位，而 smallestWidth 限定符适配采用的单位是 dp 和 sp，dp 和 sp 是google 推荐使用的计量单位。又由于很多应用要求字体大小随系统改变，所以字体单位使用 sp 也更灵活。</li> <li>屏幕分辨率限定符适配需要设备分辨率与 values-xx 文件夹完全匹配才能达到适配，而 smallestWidth 限定符适配寻找 dimens.xml  文件的原理是从大往小找，例如设备的最小宽度为 360dp，就会先去找 values-360dp，发现没有则会向下找  values-320dp，如果还是没有才找默认的 values 下的 demens.xml 文件，所以即使没有完全匹配也能达到不错的适配效果。</li></ol> <h3 id="使用步骤"><a href="#使用步骤" class="header-anchor">#</a> <strong>使用步骤</strong></h3> <p>1、以设计图最小宽度（单位为 dp）作为基准值，生成所有设备对应的 dimens.xml 文件</p> <p>生成这些文件当然不会手动去写，网上已经有大神 <a href="https://blog.csdn.net/fesdgasdgasdg" target="_blank" rel="noopener noreferrer">android阿杜<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 提供了自动生成工具。</p> <p>工具使用步骤：</p> <ol><li>在 Android Studio 中安装 ScreenMatch 插件，如图：</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/5382223-89529b5f508ae64a.png" alt="img"></p> <ol><li>在项目的默认 values 文件夹中需要一份 dimens.xml 文件
我在 <a href="https://github.com/wildma/ScreenAdaptation" target="_blank" rel="noopener noreferrer">github 源码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>已经提供了一份，直接复制过来即可。</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/5382223-26da3eb3f32fffbc.png" alt="img"></p> <ol><li>执行生成
插件安装好后，在项目的任意目录或文件上右键，选择 ScreenMatch 选项。如下图：</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/5382223-6ad9ee0eb0238886.png" alt="img"></p> <p>然后选择在哪个 module 下执行适配。即基于哪个 module 下的 res/values/dimens.xml 文件作为基准  dimens.xml 文件，生成的其他尺寸 dimens.xml 文件放在哪个 module 下。例如选择 app，然后点击 OK  ，出现如下界面表示生成文件成功</p> <p>然后再看看 res 目录下会自动生成一堆 dimens.xml 文件，如下图：</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/5382223-585bbf9316b9b150.png" alt="img"></p> <p>通过上面的步骤就已经生成了所有设备对应的 dimens.xml 文件。</p> <p>说了这么多，其实只需要简单的 2 步：</p> <ol><li>以设计图最小宽度（单位为 dp）作为基准值，利用插件生成所有设备对应的 dimens.xml 文件</li> <li>根据设计图标注，标注多少 dp，布局中就写多少dp，格式为@dimen/dp_XX。</li></ol> <h3 id="怎么适配其他-module"><a href="#怎么适配其他-module" class="header-anchor">#</a> 怎么适配其他 module?</h3> <ul><li>问题：在项目的其他 module 中怎么实现适配？难道也要多套 dimens 文件？</li> <li>解决：并不需要多套  dimens 文件，只需要在 values 文件夹下有一套与 app module 一样的 dimens 文件即可达到适配。因为经过编译，所有  module 中的 dimen 数据都会统一归类到主 module（即 app module）中的 values/dimens.xml  文件中了，然后系统又会根据你设置的值去找对应 values-swxxxdp 文件夹下的dimens.xml 文件中的值。</li> <li>验证：在项目中建一个 module，然后随便取一个 dimens.xml 文件中的值进行打印，分别运行在不同 widthDP 的设备上（用模拟器即可）观察打印的结果发现确实是这样的。</li></ul> <h3 id="常见问题汇总"><a href="#常见问题汇总" class="header-anchor">#</a> 常见问题汇总</h3> <p>为什么宽度适配了，高度有时候没有完全适配？</p> <p>因为各种屏幕高宽比并不是固定的，有16:9、4:3，还有全面屏的19.5:9等等，如果强行将宽高都适配那只会导致布局变形。</p> <p>例如一个控件的宽高为360dp和640dp，如果将它显示在宽高为360dp和640dp的设备上是正常铺满整个屏幕的，但是显示在宽高为360dp和780dp的设备上高度则不能铺满，如果你让高度铺满，而宽度又保持不变，那就会出现变形的情况。所以这也就是为什么目前市面上的屏幕适配方案只能以宽或高一个维度去适配，另一个方向用滑动或权重的方式去适配的原因。</p> <p>那你为什么说高度也能适配呢？
这里说的高度也能适配指的是在不同分辨率和密度的手机上能达到等比缩放的适配，其他屏幕适配方案也是一样的。</p> <p>如何同时适配横竖屏？</p> <ul><li>方案一：（不推荐）
计算出设备宽度和高度的dp值，然后生成对应的宽高 dimens.xml 文件。然后去掉所有  values-swXXXdp 目录上的s，即改为 values-wXXXdp。这样设备不管横竖屏都能找到对应的 values-wXXXdp  目录下的 dimens.xml 文件了。 虽然也能达到一定程度的适配，但是这样会增加很多 dimens.xml  文件，而且使用竖屏的设计图显示出来的效果也不够好。</li> <li>方案二：（推荐）
因为横屏时宽高变化太大，想要横屏时也能完全适配，那就只能让设计师出一套横屏的设计图，然后单独写一套横屏的布局文件。</li></ul> <p>注意：smallestWidth 限定符适配的效果是让不同分辨率和密度的设备上能达到以设计图等比缩放的适配，如果设备与设计图相差太大时并不能达到很好的适配效果，需要单独出图，其他屏幕适配方案也是一样的。</p> <p>如何适配平板、TV？</p> <p>同横屏道理一样，平板、TV 与手机的宽高差距太大，想要平板、TV 也能完全适配，那就只能让设计师出一套平板、TV 的设计图，然后单独写一套平板、TV 的布局文件。</p> <p>注意：再说一遍，smallestWidth 限定符适配的效果是让不同分辨率和密度的设备上能达到以设计图等比缩放的适配，如果设备与设计图相差太大时并不能达到很好的适配效果，需要单独出图，其他屏幕适配方案也是一样的。</p> <h2 id="_9-性能优化"><a href="#_9-性能优化" class="header-anchor">#</a> 9.性能优化</h2> <p>性能优化是个大方向，这里不详细说</p> <p>首先检测卡顿点</p> <p>主要有：优化布局，数据懒加载、耗时操作放入子线程、app启动优化</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 仅在debug包启用BlockCanary进行卡顿监控和提示的话，可以这么用</span>
debugImplementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>markzhai<span class="token operator">:</span>blockcanary<span class="token operator">-</span>android<span class="token operator">:</span><span class="token number">1.5</span><span class="token number">.0</span>'
releaseImplementation 'com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>markzhai<span class="token operator">:</span>blockcanary<span class="token operator">-</span>no<span class="token operator">-</span>op<span class="token operator">:</span><span class="token number">1.5</span><span class="token number">.0</span>'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>看哪里卡就优化哪里吧，屌丝们！</p> <h2 id="_10-混淆"><a href="#_10-混淆" class="header-anchor">#</a> 10.混淆</h2> <p>混淆做得好，打包之后的apk就能正常运行，毕竟debug和release还是不一样的呀</p> <p>参考一下我的混淆吧</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code># <span class="token class-name">Add</span> project specific <span class="token class-name">ProGuard</span> rules here<span class="token punctuation">.</span>
# <span class="token class-name">You</span> can control the set of applied configuration files using the
# proguardFiles setting in build<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>
#
# <span class="token class-name">For</span> more details<span class="token punctuation">,</span> see
#   http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>developer<span class="token punctuation">.</span>android<span class="token punctuation">.</span>com<span class="token operator">/</span>guide<span class="token operator">/</span>developing<span class="token operator">/</span>tools<span class="token operator">/</span>proguard<span class="token punctuation">.</span>html

# <span class="token class-name">If</span> your project <span class="token keyword">uses</span> <span class="token class-name">WebView</span> <span class="token keyword">with</span> JS<span class="token punctuation">,</span> uncomment the following
# and specify the fully qualified <span class="token keyword">class</span> name <span class="token keyword">to</span> <span class="token namespace">the</span> <span class="token class-name">JavaScript</span> <span class="token keyword">interface</span>
# <span class="token keyword">class</span><span class="token operator">:</span>
#<span class="token operator">-</span>keepclassmembers <span class="token keyword">class</span> fqcn<span class="token punctuation">.</span>of<span class="token punctuation">.</span>javascript<span class="token punctuation">.</span><span class="token keyword">interface</span><span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">.</span>webview <span class="token punctuation">{</span>
#   <span class="token keyword">public</span> <span class="token operator">*</span><span class="token punctuation">;</span>
#<span class="token punctuation">}</span>

# <span class="token class-name">Uncomment</span> <span class="token keyword">this</span> <span class="token keyword">to</span> <span class="token namespace">preserve</span> the line number information <span class="token keyword">for</span>
# debugging stack traces<span class="token punctuation">.</span>
#<span class="token operator">-</span>keepattributes <span class="token class-name">SourceFile</span><span class="token punctuation">,</span><span class="token class-name">LineNumberTable</span>

# <span class="token class-name">If</span> you keep the line number information<span class="token punctuation">,</span> uncomment <span class="token keyword">this</span> <span class="token keyword">to</span>
# hide the original source file name<span class="token punctuation">.</span>
#<span class="token operator">-</span>renamesourcefileattribute <span class="token class-name">SourceFile</span>

#obfuscate nonpubulic element
#<span class="token operator">-</span>dontskipnonpubliclibraryclasses
#<span class="token operator">-</span>dontskipnonpubliclibraryclassmembers
#
#ignore <span class="token keyword">native</span> method ����<span class="token keyword">native</span>������������
<span class="token operator">-</span>keepclasseswithmembernames <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token punctuation">{</span>
    <span class="token keyword">native</span> <span class="token generics"><span class="token punctuation">&lt;</span>methods<span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

##<span class="token operator">-</span>libraryjars libs<span class="token operator">/</span>android<span class="token operator">-</span>support<span class="token operator">-</span>v4<span class="token punctuation">.</span>jar
<span class="token operator">-</span>ignorewarnings
#
##ignore support<span class="token punctuation">.</span>v4<span class="token operator">/</span>v7 support��������
#<span class="token operator">-</span>keep <span class="token keyword">class</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span> <span class="token operator">*</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
#<span class="token operator">-</span>keep <span class="token keyword">class</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v4<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span> <span class="token operator">*</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v4<span class="token punctuation">.</span>*<span class="token operator">*</span>
#<span class="token operator">-</span>keep <span class="token keyword">interface</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v4<span class="token punctuation">.</span>app<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span> <span class="token operator">*</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
#<span class="token operator">-</span>keep <span class="token keyword">class</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span> <span class="token operator">*</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>*<span class="token operator">*</span>
#<span class="token operator">-</span>keep <span class="token keyword">interface</span> android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span> <span class="token operator">*</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

#ignore basic setting �Ĵ����ʲô�Ĳ�����
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span>AppCompatActivity</span><span class="token punctuation">;</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v4<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span>Fragment</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span>Application</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span>Service</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span>Instrumentation</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>media<span class="token punctuation">.</span></span>AudioManager</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span>KeyEvent</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span>Intent</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span>IntentFilter</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span>Context</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span>BroadcastReceiver</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span>ContentProvider</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span>backup<span class="token punctuation">.</span></span>BackupAgentHelper</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>preference<span class="token punctuation">.</span></span>Preference</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> android<span class="token punctuation">.</span>bluetooth<span class="token punctuation">.</span>*<span class="token operator">*</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>*<span class="token operator">*</span>
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span>Application</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>mmkv<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>za<span class="token punctuation">.</span>finger<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>arcsoft<span class="token punctuation">.</span>face<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>arcsoft<span class="token punctuation">.</span>imageutil<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> android<span class="token punctuation">.</span>serialport<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>angmarch<span class="token punctuation">.</span>views<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> android_serialport_api<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>iflytek<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> cn<span class="token punctuation">.</span>bingoogolapple<span class="token punctuation">.</span>qrcode<span class="token punctuation">.</span>core<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> cn<span class="token punctuation">.</span>bingoogolapple<span class="token punctuation">.</span>qrcode<span class="token punctuation">.</span>zbar<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> net<span class="token punctuation">.</span>sourceforge<span class="token punctuation">.</span>zbar<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>arcsoft<span class="token punctuation">.</span>arcfacedemo<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> denseshelf<span class="token punctuation">.</span>app<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> database<span class="token punctuation">.</span>dense_shelf_db<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>mjdev<span class="token punctuation">.</span>libaums<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>xwalk<span class="token punctuation">.</span>core<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>chromium<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SevenZip</span><span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> org<span class="token punctuation">.</span>bouncycastle<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span></span>UHF</span><span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> cat<span class="token punctuation">.</span>ereza<span class="token punctuation">.</span>customactivityoncrash<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>syd<span class="token punctuation">.</span>oden<span class="token punctuation">.</span>gesturelock<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> cn<span class="token punctuation">.</span>jzvd<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>chad<span class="token punctuation">.</span>library<span class="token punctuation">.</span>adapter<span class="token punctuation">.</span>base<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>lamedemo<span class="token punctuation">.</span>jni<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> com<span class="token punctuation">.</span>github<span class="token punctuation">.</span>hiteshsondhi88<span class="token punctuation">.</span>libffmpeg<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
#
##keep annotation not obfuscate
#<span class="token operator">-</span>keep <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>Annotation</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
#
#<span class="token operator">-</span>keepnames <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span>
#<span class="token operator">-</span>keepclassmembers <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
#    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID<span class="token punctuation">;</span>
#    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>ObjectStreamField</span><span class="token punctuation">[</span><span class="token punctuation">]</span> serialPersistentFields<span class="token punctuation">;</span>
#    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>ObjectOutputStream</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>ObjectInputStream</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#    <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span> <span class="token function">writeReplace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#    <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#<span class="token punctuation">}</span>
#
##resource
#<span class="token operator">-</span>keepclassmembers <span class="token keyword">class</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">.</span>R$<span class="token operator">*</span> <span class="token punctuation">{</span>
#    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span>fields<span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
#<span class="token punctuation">}</span>
#
#<span class="token operator">-</span>keep <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Parcelable</span> <span class="token punctuation">{</span>
#   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span>Parcelable</span>$<span class="token class-name">Creator</span> <span class="token operator">*</span><span class="token punctuation">;</span>
#<span class="token punctuation">}</span>
#
#<span class="token operator">-</span>keepclassmembers <span class="token keyword">enum</span> <span class="token operator">*</span> <span class="token punctuation">{</span>
#  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token operator">*</span><span class="token operator">*</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#<span class="token punctuation">}</span>
#
#<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span>View</span> <span class="token punctuation">{</span>
#    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span>Context</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span>Context</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>AttributeSet</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span>init<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>content<span class="token punctuation">.</span></span>Context</span><span class="token punctuation">,</span> <span class="token class-name"><span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>AttributeSet</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#    <span class="token keyword">public</span> <span class="token keyword">void</span> set<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
#<span class="token punctuation">}</span>
#
#greendao
<span class="token operator">-</span>keepclassmembers <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span></span>AbstractDao</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">dropTable</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span>database<span class="token punctuation">.</span></span>Database</span><span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">createTable</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span>database<span class="token punctuation">.</span></span>Database</span><span class="token punctuation">,</span> <span class="token keyword">boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">-</span>keep <span class="token keyword">class</span> org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span>*<span class="token operator">*</span><span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keepclassmembers <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span></span>AbstractDao</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span> TABLENAME<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">class</span> <span class="token operator">*</span><span class="token operator">*</span>$<span class="token class-name">Properties</span>

#eventbus
<span class="token operator">-</span>keepattributes <span class="token operator">*</span><span class="token class-name">Annotation</span><span class="token operator">*</span>
<span class="token operator">-</span>keepclassmembers <span class="token keyword">class</span> <span class="token operator">*</span><span class="token operator">*</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@org.greenrobot.eventbus.Subscribe</span> <span class="token generics"><span class="token punctuation">&lt;</span>methods<span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">enum</span> <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>eventbus<span class="token punctuation">.</span></span>ThreadMode</span> <span class="token punctuation">{</span> <span class="token operator">*</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token punctuation">.</span>module<span class="token punctuation">.</span></span>GlideModule</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token punctuation">.</span>module<span class="token punctuation">.</span></span>AppGlideModule</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>bumptech<span class="token punctuation">.</span>glide<span class="token punctuation">.</span>load<span class="token punctuation">.</span></span>ImageHeaderParser</span>$<span class="token operator">*</span><span class="token operator">*</span> <span class="token punctuation">{</span>
  <span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span> $VALUES<span class="token punctuation">;</span>
  <span class="token keyword">public</span> <span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
# banner 的混淆代码
<span class="token operator">-</span>keep <span class="token keyword">class</span> com<span class="token punctuation">.</span>youth<span class="token punctuation">.</span>banner<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

<span class="token operator">-</span>keep <span class="token keyword">class</span> androidx<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">interface</span> androidx<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> androidx<span class="token punctuation">.</span>*<span class="token operator">*</span>
<span class="token operator">-</span>keep <span class="token keyword">class</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>material<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>dontwarn androidx<span class="token punctuation">.</span>*<span class="token operator">*</span>
<span class="token operator">-</span>dontwarn com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>material<span class="token punctuation">.</span>*<span class="token operator">*</span>
<span class="token operator">-</span>dontnote com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>material<span class="token punctuation">.</span>*<span class="token operator">*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br></div></div><h2 id="_11-测试"><a href="#_11-测试" class="header-anchor">#</a> 11.测试</h2> <p>测试真的很重要！自测会发现更多问题，别人测出的bug也要虚心接受！</p> <p>改bug吧，为了自己的愚蠢付出代价吧，少年！</p> <p>出来混还是要还的！</p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/wyba/blog/edit/master/docs/01.Android/06.Android物联网三年开发总结.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/blog/tags/?tag=%E7%89%A9%E8%81%94%E7%BD%91" title="标签">#物联网</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/12/23, 11:43:29</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/android_5/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Android科大讯飞离线命令词+声纹识别终极奥义</div></a> <a href="/blog/pages/android_7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">BaseFragment封装</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/pages/android_5/" class="prev">Android科大讯飞离线命令词+声纹识别终极奥义</a></span> <span class="next"><a href="/blog/pages/android_7/">BaseFragment封装</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/af8584/"><div>
            BLE开发
            <!----></div></a> <span class="date">04-29</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/8aff38/"><div>
            动画简介
            <!----></div></a> <span class="date">04-29</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/99060e/"><div>
            View工作流程
            <!----></div></a> <span class="date">04-29</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1070096495@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wyba" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2022
    <span>wyb | <a href="https://github.com/wyba/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.7a0bcda5.js" defer></script><script src="/blog/assets/js/2.a5a0f980.js" defer></script><script src="/blog/assets/js/13.9e5f7372.js" defer></script>
  </body>
</html>
