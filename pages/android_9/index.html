<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AndroidX项目迁移 | wyb&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/blog/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="主流技术博客,简洁至上,专注全栈学习与总结。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/blog/assets/css/0.styles.7dd69afa.css" as="style"><link rel="preload" href="/blog/assets/js/app.7a0bcda5.js" as="script"><link rel="preload" href="/blog/assets/js/2.a5a0f980.js" as="script"><link rel="preload" href="/blog/assets/js/16.e3c6e4ef.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.2ffa04b0.js"><link rel="prefetch" href="/blog/assets/js/11.70f92a32.js"><link rel="prefetch" href="/blog/assets/js/12.340f549c.js"><link rel="prefetch" href="/blog/assets/js/13.9e5f7372.js"><link rel="prefetch" href="/blog/assets/js/14.b9340184.js"><link rel="prefetch" href="/blog/assets/js/15.6c1f35df.js"><link rel="prefetch" href="/blog/assets/js/17.0053c99b.js"><link rel="prefetch" href="/blog/assets/js/18.45a0f3ed.js"><link rel="prefetch" href="/blog/assets/js/19.fb9cc485.js"><link rel="prefetch" href="/blog/assets/js/20.3d5c7a50.js"><link rel="prefetch" href="/blog/assets/js/21.3d0ee275.js"><link rel="prefetch" href="/blog/assets/js/22.e8a9df9a.js"><link rel="prefetch" href="/blog/assets/js/23.82ed3e72.js"><link rel="prefetch" href="/blog/assets/js/24.9d7a7b68.js"><link rel="prefetch" href="/blog/assets/js/25.0bc9ab07.js"><link rel="prefetch" href="/blog/assets/js/26.d2b7a967.js"><link rel="prefetch" href="/blog/assets/js/27.2c02fa2c.js"><link rel="prefetch" href="/blog/assets/js/28.a1afa2d7.js"><link rel="prefetch" href="/blog/assets/js/29.10d9dc2f.js"><link rel="prefetch" href="/blog/assets/js/3.8ec5b007.js"><link rel="prefetch" href="/blog/assets/js/30.425d8100.js"><link rel="prefetch" href="/blog/assets/js/31.63e4f8fb.js"><link rel="prefetch" href="/blog/assets/js/32.77a66ca1.js"><link rel="prefetch" href="/blog/assets/js/33.d0e23080.js"><link rel="prefetch" href="/blog/assets/js/34.1e204563.js"><link rel="prefetch" href="/blog/assets/js/35.2833874a.js"><link rel="prefetch" href="/blog/assets/js/36.97de71b1.js"><link rel="prefetch" href="/blog/assets/js/37.9036f6e9.js"><link rel="prefetch" href="/blog/assets/js/38.6793c03d.js"><link rel="prefetch" href="/blog/assets/js/39.849e03fc.js"><link rel="prefetch" href="/blog/assets/js/4.6e55e017.js"><link rel="prefetch" href="/blog/assets/js/40.56980ac8.js"><link rel="prefetch" href="/blog/assets/js/41.7a196738.js"><link rel="prefetch" href="/blog/assets/js/42.10732ea3.js"><link rel="prefetch" href="/blog/assets/js/43.810ba5a4.js"><link rel="prefetch" href="/blog/assets/js/44.73bbd126.js"><link rel="prefetch" href="/blog/assets/js/45.63b7b5a1.js"><link rel="prefetch" href="/blog/assets/js/46.a65e64ce.js"><link rel="prefetch" href="/blog/assets/js/47.00dc050a.js"><link rel="prefetch" href="/blog/assets/js/48.b91a0ddd.js"><link rel="prefetch" href="/blog/assets/js/49.4a16d835.js"><link rel="prefetch" href="/blog/assets/js/5.4843dc8e.js"><link rel="prefetch" href="/blog/assets/js/50.132e204b.js"><link rel="prefetch" href="/blog/assets/js/51.1345b9a1.js"><link rel="prefetch" href="/blog/assets/js/52.742ee8db.js"><link rel="prefetch" href="/blog/assets/js/53.8d9c7dd6.js"><link rel="prefetch" href="/blog/assets/js/54.c4038d3f.js"><link rel="prefetch" href="/blog/assets/js/55.766e53e6.js"><link rel="prefetch" href="/blog/assets/js/56.ad60a3d1.js"><link rel="prefetch" href="/blog/assets/js/57.13758d00.js"><link rel="prefetch" href="/blog/assets/js/58.ee3f65e8.js"><link rel="prefetch" href="/blog/assets/js/59.602af4ee.js"><link rel="prefetch" href="/blog/assets/js/6.da76d55e.js"><link rel="prefetch" href="/blog/assets/js/60.15e31058.js"><link rel="prefetch" href="/blog/assets/js/61.7f219b23.js"><link rel="prefetch" href="/blog/assets/js/62.10d98d67.js"><link rel="prefetch" href="/blog/assets/js/63.8ef0d49d.js"><link rel="prefetch" href="/blog/assets/js/64.983ab7ac.js"><link rel="prefetch" href="/blog/assets/js/65.37330ddf.js"><link rel="prefetch" href="/blog/assets/js/66.2776a634.js"><link rel="prefetch" href="/blog/assets/js/67.8b5b3535.js"><link rel="prefetch" href="/blog/assets/js/68.cccc4d3a.js"><link rel="prefetch" href="/blog/assets/js/7.ba6e6c9a.js"><link rel="prefetch" href="/blog/assets/js/8.99b38245.js"><link rel="prefetch" href="/blog/assets/js/9.fc8f51e1.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.7dd69afa.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/EB-logo.png" alt="wyb's blog" class="logo"> <span class="site-name can-hide">wyb's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div> <a href="https://github.com/wyba/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/lufei.jpeg"> <div class="blogger-info"><h3>wyb</h3> <span>吾日三省吾身</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div> <a href="https://github.com/wyba/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/blog/pages/android_1/" class="sidebar-link">科大讯飞SDK使用总结</a></li><li><a href="/blog/pages/android_2/" class="sidebar-link">PDA串口UnsatisfiedLinkError解决</a></li><li><a href="/blog/pages/android_3/" class="sidebar-link">科大讯飞声纹识别WebApi鉴权认证失败解决</a></li><li><a href="/blog/pages/android_4/" class="sidebar-link">Android获取以太网mac、ip、网关、子网掩码</a></li><li><a href="/blog/pages/android_5/" class="sidebar-link">Android科大讯飞离线命令词+声纹识别终极奥义</a></li><li><a href="/blog/pages/android_6/" class="sidebar-link">Android物联网三年开发总结</a></li><li><a href="/blog/pages/android_7/" class="sidebar-link">BaseFragment封装</a></li><li><a href="/blog/pages/android_8/" class="sidebar-link">File封装</a></li><li><a href="/blog/pages/android_9/" aria-current="page" class="active sidebar-link">AndroidX项目迁移</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/blog/pages/android_9/#_1、更新升级插件" class="sidebar-link">1、更新升级插件</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_9/#_2、开启迁移androidx" class="sidebar-link">2、开启迁移AndroidX</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_9/#_3、一键迁移androidx库" class="sidebar-link">3、一键迁移AndroidX库</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_9/#_4、批量替换" class="sidebar-link">4、批量替换</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_9/#_5、注意混淆" class="sidebar-link">5、注意混淆</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/android_9/#_6、总结" class="sidebar-link">6、总结</a></li></ul></li><li><a href="/blog/pages/android_10/" class="sidebar-link">视频通话测试踩坑</a></li><li><a href="/blog/pages/a9e14e/" class="sidebar-link">Android Jetpack简介</a></li><li><a href="/blog/pages/2ebf62/" class="sidebar-link">Android Jetpack+MVVM</a></li><li><a href="/blog/pages/874c9e/" class="sidebar-link">Androidx分包</a></li><li><a href="/blog/pages/066351/" class="sidebar-link">Android性能优化</a></li><li><a href="/blog/pages/bac66b/" class="sidebar-link">Android Activity</a></li><li><a href="/blog/pages/08ee91/" class="sidebar-link">Android BroadcastReceiver</a></li><li><a href="/blog/pages/6f10c5/" class="sidebar-link">Android Service</a></li><li><a href="/blog/pages/7284b2/" class="sidebar-link">Android ContentProvider</a></li><li><a href="/blog/pages/14545c/" class="sidebar-link">Android Fragment</a></li><li><a href="/blog/pages/004b87/" class="sidebar-link">Android序列化</a></li><li><a href="/blog/pages/7b3423/" class="sidebar-link">View事件机制</a></li><li><a href="/blog/pages/420b54/" class="sidebar-link">多进程及IPC</a></li><li><a href="/blog/pages/e86925/" class="sidebar-link">Bitmap加载优化</a></li><li><a href="/blog/pages/b906ee/" class="sidebar-link">ListView原理及复用机制</a></li><li><a href="/blog/pages/19c834/" class="sidebar-link">OkHttp原理</a></li><li><a href="/blog/pages/e5b1b5/" class="sidebar-link">EventBus原理</a></li><li><a href="/blog/pages/37f9d7/" class="sidebar-link">MeasureSpec原理</a></li><li><a href="/blog/pages/99060e/" class="sidebar-link">View工作流程</a></li><li><a href="/blog/pages/8aff38/" class="sidebar-link">动画简介</a></li><li><a href="/blog/pages/af8584/" class="sidebar-link">BLE开发</a></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/blog/Android/#Android" data-v-1baff76c>Android</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>wyb</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2021-12-27</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">AndroidX项目迁移<!----></h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><blockquote><p>说明：由于人脸识别用到了Androidx中的api，蛋疼呀，整个项目要往Androidx方向迁移，记录一下。</p></blockquote> <h2 id="_1、更新升级插件"><a href="#_1、更新升级插件" class="header-anchor">#</a> 1、更新升级插件</h2> <ul><li>将AS更新至 <strong>AS 3.2</strong>及以上；</li> <li>Gradle 插件版本改为 <strong>4.6</strong>及以上；</li> <li>compileSdkVersion 版本升级到 <strong>28</strong>及以上；</li> <li>buildToolsVersion 版本改为 <strong>28.0.2</strong>及以上。</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211227095809766.png" alt="image-20211227095809766"></p> <h2 id="_2、开启迁移androidx"><a href="#_2、开启迁移androidx" class="header-anchor">#</a> 2、开启迁移AndroidX</h2> <p>在项目的<code>gradle.properties</code>文件里添加如下配置：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>android.useAndroidX<span class="token operator">=</span>true
android.enableJetifier<span class="token operator">=</span>true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>出现同步提示，同步一下项目</p> <h2 id="_3、一键迁移androidx库"><a href="#_3、一键迁移androidx库" class="header-anchor">#</a> 3、一键迁移AndroidX库</h2> <p>AS 3.2 及以上版本提供了更加方便快捷的方法一键迁移到 AndroidX。选择菜单上的<strong>ReFactor —— Migrate to AndroidX...</strong> 即可。</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211227100410886.png" alt="image-20211227100410886"></p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211227100931238.png" alt="image-20211227100931238"></p> <p>合并之前最好<strong>备份</strong>一下</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211227101050263.png" alt="image-20211227101050263"></p> <p>点击Do Refactor开始迁移</p> <p>此时项目并没有报错，我们<strong>make</strong>一下工程，就可以知道错误在哪了</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211227101624198.png" alt="image-20211227101624198"></p> <p>太多错误了，我们最好先<strong>clean</strong>一下工程，然后再<strong>make</strong></p> <p>由于是多个模块，所以会先编译app模块之下的模块，就是人脸识别模块，和settings.gradle里面的模块依赖顺序没有关系的</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211227102239028.png" alt="image-20211227102239028"></p> <p>我们直接用虹软4.1的模块</p> <p>报错</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">A</span> problem occurred evaluating project '<span class="token operator">:</span><span class="token class-name">Arcface4_1</span>'<span class="token punctuation">.</span>
<span class="token operator">&gt;</span> <span class="token class-name">Could</span> not find method <span class="token function">buildFeatures</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> arguments <span class="token punctuation">[</span>build_37rffb481csynfnrjjc9a3svq$_run_closure1$_closure4<span class="token annotation punctuation">@6e8b09ea</span><span class="token punctuation">]</span> on object of type <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>build<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span></span>LibraryExtension</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>估计是插件版本低</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>dependencies <span class="token punctuation">{</span>
    classpath 'com<span class="token punctuation">.</span>android<span class="token punctuation">.</span>tools<span class="token punctuation">.</span>build<span class="token operator">:</span>gradle<span class="token operator">:</span><span class="token number">3.2</span><span class="token number">.1</span>'
    classpath 'org<span class="token punctuation">.</span>greenrobot<span class="token operator">:</span>greendao<span class="token operator">-</span>gradle<span class="token operator">-</span>plugin<span class="token operator">:</span><span class="token number">3.2</span><span class="token number">.2</span>'
    classpath 'com<span class="token punctuation">.</span>jakewharton<span class="token operator">:</span>butterknife<span class="token operator">-</span>gradle<span class="token operator">-</span>plugin<span class="token operator">:</span><span class="token number">8.8</span><span class="token number">.1</span>'

    <span class="token comment">// NOTE: Do not place your application dependencies here; they belong</span>
    <span class="token comment">// in the individual module build.gradle files</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>根据之前成功的按例，我决心修改一番，百度的还是坑爹，实战才是王道，参考如下：</p> <p>gradle-wrapper.properties</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>#<span class="token class-name">Tue</span> <span class="token class-name">Nov</span> <span class="token number">02</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">12</span><span class="token operator">:</span><span class="token number">32</span> CST <span class="token number">2021</span>
distributionBase<span class="token operator">=</span><span class="token class-name">GRADLE_USER_HOME</span>
distributionPath<span class="token operator">=</span>wrapper<span class="token operator">/</span>dists
zipStoreBase<span class="token operator">=</span><span class="token class-name">GRADLE_USER_HOME</span>
zipStorePath<span class="token operator">=</span>wrapper<span class="token operator">/</span>dists
distributionUrl<span class="token operator">=</span>https\<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>services<span class="token punctuation">.</span>gradle<span class="token punctuation">.</span>org<span class="token operator">/</span>distributions<span class="token operator">/</span>gradle<span class="token operator">-</span><span class="token number">6.5</span><span class="token operator">-</span>bin<span class="token punctuation">.</span>zip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>root gradle</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span>

buildscript <span class="token punctuation">{</span>
    
    repositories <span class="token punctuation">{</span>
        <span class="token function">google</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        classpath <span class="token string">&quot;com.android.tools.build:gradle:4.1.2&quot;</span>
        classpath 'org<span class="token punctuation">.</span>greenrobot<span class="token operator">:</span>greendao<span class="token operator">-</span>gradle<span class="token operator">-</span>plugin<span class="token operator">:</span><span class="token number">3.3</span><span class="token number">.0</span>'
        classpath 'com<span class="token punctuation">.</span>jakewharton<span class="token operator">:</span>butterknife<span class="token operator">-</span>gradle<span class="token operator">-</span>plugin<span class="token operator">:</span><span class="token number">10.0</span><span class="token number">.0</span>'
        <span class="token comment">// NOTE: Do not place your application dependencies here; they belong</span>
        <span class="token comment">// in the individual module build.gradle files</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

allprojects <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token function">google</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">jcenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        maven <span class="token punctuation">{</span> url 'https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>jitpack<span class="token punctuation">.</span>io'<span class="token punctuation">}</span>
        maven <span class="token punctuation">{</span> url 'https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>download<span class="token punctuation">.</span><span class="token number">01.</span>org<span class="token operator">/</span>crosswalk<span class="token operator">/</span>releases<span class="token operator">/</span>crosswalk<span class="token operator">/</span>android<span class="token operator">/</span>maven2'<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

task <span class="token function">clean</span><span class="token punctuation">(</span>type<span class="token operator">:</span> <span class="token class-name">Delete</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    delete rootProject<span class="token punctuation">.</span>buildDir
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>这是一个痛苦的过程，请耐心。。。。</p> <p>每次<strong>sync</strong>完之后，我们都需要<strong>make</strong>一下工程，确保没有错误</p> <h2 id="_4、批量替换"><a href="#_4、批量替换" class="header-anchor">#</a> 4、批量替换</h2> <p>由于这个一键迁移不是很智能，还是得手工修改一下依赖和类</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">NonNull</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>core<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Fragment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>core<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">FragmentManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>core<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">FragmentPagerAdapter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>core<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">ViewPager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ColorRes</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DrawableRes</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>core<span class="token punctuation">.</span>view<span class="token punctuation">.</span>animation<span class="token punctuation">.</span></span><span class="token class-name">LinearOutSlowInInterpolator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">AppCompatTextView</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">GridLayoutManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>v7<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">RecyclerView</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>multidex<span class="token punctuation">.</span></span><span class="token class-name">MultiDex</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">IntDef</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequiresApi</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>support<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">StringRes</span></span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>替换成</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">NonNull</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Nullable</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>fragment<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Fragment</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>fragment<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">FragmentManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>fragment<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">FragmentPagerAdapter</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>viewpager<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">ViewPager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ColorRes</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DrawableRes</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>interpolator<span class="token punctuation">.</span>view<span class="token punctuation">.</span>animation<span class="token punctuation">.</span></span><span class="token class-name">LinearOutSlowInInterpolator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">AppCompatTextView</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>recyclerview<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">GridLayoutManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>recyclerview<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">RecyclerView</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>multidex<span class="token punctuation">.</span></span><span class="token class-name">MultiDex</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequiresApi</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">StringRes</span></span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>报错</p> <p>The given artifact contains a string literal with a package reference 'android.support.v4.content' that cannot be safely rewritten. Libraries using reflection such as annotation processors need to be updated manually to add support for androidx.</p> <p>可以看到</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Execution failed for task ':app:javaPreCompileDebug'.
&gt; Could not resolve all files for configuration ':app:debugAnnotationProcessorClasspath'.
   &gt; Failed to transform butterknife-compiler-8.8.1.jar (com.jakewharton:butterknife-compiler:8.8.1) to match attributes {artifactType=processed-jar, org.gradle.category=library, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.
      &gt; Execution failed for JetifyTransform: C:\Users\74098\.gradle\caches\modules-2\files-2.1\com.jakewharton\butterknife-compiler\8.8.1\b2f4505a1babb7b7c11abbbf8ea4c90b18c3aeac\butterknife-compiler-8.8.1.jar.
         &gt; Failed to transform 'C:\Users\74098\.gradle\caches\modules-2\files-2.1\com.jakewharton\butterknife-compiler\8.8.1\b2f4505a1babb7b7c11abbbf8ea4c90b18c3aeac\butterknife-compiler-8.8.1.jar' using Jetifier. Reason: AmbiguousStringJetifierException, message: The given artifact contains a string literal with a package reference 'android.support.v4.content' that cannot be safely rewritten. Libraries using reflection such as annotation processors need to be updated manually to add support for androidx.. (Run with --stacktrace for more details.)
           This is a known exception, and Jetifier won't be able to jetify this library.
           Suggestions:
            - If you believe this library doesn't need to be jetified (e.g., if it already supports AndroidX, or if it doesn't use support libraries/AndroidX at all), add android.jetifier.blacklist = {comma-separated list of regular expressions (or simply names) of the libraries that you don't want to be jetified} to the gradle.properties file.
            - If you believe this library needs to be jetified (e.g., if it uses old support libraries and breaks your app if it isn't jetified), contact the library's authors to update this library to support AndroidX and use the supported version once it is released.
           If you need further help, please leave a comment at https://issuetracker.google.com/issues/140747218.

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>butterknife插件换成10.0.0吧，受不了了啊，greendao插件也要换成最新的</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/*ButterKnife引用*/
implementation <span class="token string">&quot;com.jakewharton:butterknife:10.0.0&quot;</span>
annotationProcessor <span class="token string">&quot;com.jakewharton:butterknife-compiler:10.0.0&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>classpath <span class="token string">'com.jakewharton:butterknife-gradle-plugin:10.0.0'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>人都要疯了compileSdkVersion和targetSdkVersion全部换成30，坑爹的人脸识别</p> <p>又开始报错</p> <p>F:\work\AndroidProject\SmartBalanceChest\Arcface4_1\build\intermediates\packaged_res\debug\values\values.xml:103:5-67: AAPT: warn: multiple substitutions specified in non-positional format; did you mean to add the formatted=&quot;false&quot; attribute?.</p> <p>一个个标签加吧 formatted=&quot;false&quot;</p> <p>难受</p> <p>又报错</p> <p>Android resource compilation failed
C:\Users\74098.gradle\caches\transforms-2\files-2.1\777fd523460f90923c5f24c747dd86ba\preference-1.1.1\res\values\values.xml:425:5-446:25: AAPT: error: duplicate value for resource 'attr/min' with config ''.</p> <p>C:\Users\74098.gradle\caches\transforms-2\files-2.1\777fd523460f90923c5f24c747dd86ba\preference-1.1.1\res\values\values.xml:425:5-446:25: AAPT: error: resource previously defined here.</p> <p>F:\work\AndroidProject\SmartBalanceChest\app\build\intermediates\incremental\mergeDebugResources\merged.dir\values\values.xml: AAPT: error: file failed to compile.</p> <p>SeekBarPreference，资源合并失败，<strong>Android resource compilation failed</strong>，卧槽，怎么回事</p> <p>这个玩意，卧槽，怎么会重复呢，蛋疼，怀疑点</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211227114546359.png" alt="image-20211227114546359"></p> <p>人都要疯了，<strong>所有模块</strong>的compileSdkVersion和targetSdkVersion全部换成30，还是不行，怎么回事</p> <p>卧槽，原来有重复的min命名</p> <p><img src="https://cdn.jsdelivr.net/gh/wyba/image_store/blog/image-20211227140929811.png" alt="image-20211227140929811"></p> <p>真是奇怪，明明declare-styleable的name不一样，为啥attr里的name一样会冲突呢，搞不明白，删掉这个declare-styleable就可以了</p> <p>把人脸识别的使用方式换一下，修改错误</p> <p>蛋疼，虽然可以make通过，但是进入app各种崩溃，原来xml布局文件有错误，继续改</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>androidx.constraintlayout.ConstraintLayout
androidx.core.view.ViewPager
android.support.v7.widget.RecyclerView
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>替换</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>androidx.constraintlayout.widget.ConstraintLayout
androidx.viewpager.widget.ViewPager
androidx.recyclerview.widget.RecyclerView
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_5、注意混淆"><a href="#_5、注意混淆" class="header-anchor">#</a> 5、注意混淆</h2> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">-</span>keep <span class="token keyword">class</span> androidx<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">interface</span> androidx<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>keep <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token operator">*</span> <span class="token keyword">extends</span> androidx<span class="token punctuation">.</span>*<span class="token operator">*</span>
<span class="token operator">-</span>keep <span class="token keyword">class</span> com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>material<span class="token punctuation">.</span>*<span class="token operator">*</span> <span class="token punctuation">{</span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token operator">-</span>dontwarn androidx<span class="token punctuation">.</span>*<span class="token operator">*</span>
<span class="token operator">-</span>dontwarn com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>material<span class="token punctuation">.</span>*<span class="token operator">*</span>
<span class="token operator">-</span>dontnote com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>android<span class="token punctuation">.</span>material<span class="token punctuation">.</span>*<span class="token operator">*</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>虹软人脸识别4.1升级真的就是坑多</p> <p>1.app.gradle</p> <div class="language-groovy line-numbers-mode"><pre class="language-groovy"><code>buildFeatures<span class="token punctuation">{</span>
    dataBinding <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token comment">// for view binding :</span>
    <span class="token comment">// viewBinding = true</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>2.ArcFaceApplication.init(this);</p> <p>3.greendao数据库版本升级</p> <p>4.人脸图片保存路径：/data/data/appid/files/faceDB/registerFaces/</p> <h2 id="_6、总结"><a href="#_6、总结" class="header-anchor">#</a> 6、总结</h2> <p>没事别迁移，一堆问题等着你！！！</p> <p>迁移之后要测试一遍，修改问题！</p></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/wyba/blog/edit/master/docs/01.Android/09.AndroidX项目迁移.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/blog/tags/?tag=Androidx" title="标签">#Androidx</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/12/27, 18:19:23</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/android_8/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">File封装</div></a> <a href="/blog/pages/android_10/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">视频通话测试踩坑</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/pages/android_8/" class="prev">File封装</a></span> <span class="next"><a href="/blog/pages/android_10/">视频通话测试踩坑</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/af8584/"><div>
            BLE开发
            <!----></div></a> <span class="date">04-29</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/8aff38/"><div>
            动画简介
            <!----></div></a> <span class="date">04-29</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/99060e/"><div>
            View工作流程
            <!----></div></a> <span class="date">04-29</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1070096495@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/wyba" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2022
    <span>wyb | <a href="https://github.com/wyba/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.7a0bcda5.js" defer></script><script src="/blog/assets/js/2.a5a0f980.js" defer></script><script src="/blog/assets/js/16.e3c6e4ef.js" defer></script>
  </body>
</html>
